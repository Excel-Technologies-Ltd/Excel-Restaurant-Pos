import{$ as g,r as n,K as y,j as e,h as j,v as f,w as o}from"./index-Bxetnfjv.js";const b=()=>{const{data:a,isLoading:x}=g("BOM",{fields:["name","item","item_name","is_active"],filters:[["is_active","=",1],["is_default","=",1]],limit:10});console.log("bomList",a);const[s,i]=n.useState(null),[m,r]=n.useState(!1),[l,c]=n.useState(0),{call:p}=y("excel_restaurant_pos.api.bom.run_bom_process"),u=t=>{r(!0),i(t)},h=()=>{p({bom_id:s==null?void 0:s.name,qty:l}).then(t=>{o.success("Process execution started"),c(0)}).catch(t=>{console.log("err",t),o.error("Failed to execute process")}).finally(()=>{r(!1)})},d=()=>{r(!1),i(null)};return x?e.jsx("div",{className:"p-4",children:"Loading Production Recipes..."}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Production Recipes"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and view your production recipes"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full border-collapse min-w-[1380px] border rounded-lg overflow-hidden p-5 ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BOM No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:a==null?void 0:a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.item}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.item_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>u(t),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Process"})})]},t.name))})]})}),e.jsx(j,{isOpen:m,onClose:d,title:`Process BOM: ${s==null?void 0:s.name}`,width:"w-full md:max-w-[600px]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"BOM Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Item: "}),s==null?void 0:s.item_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"BOM Quantity: "}),s==null?void 0:s.quantity," ",s==null?void 0:s.uom]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(f,{label:"Production Quantity",type:"number",value:l,onChange:t=>c(t.target.value),required:!0,min:1})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{onClick:d,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"}),e.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Process BOM"})]})]})})]})};export{b as default};
